{"version":3,"sources":["app/initialize.js","app/js/config.js","app/js/mainGame.js","app/js/render.js","app/js/stageUI.js","app/js/utilities/gameInput.js","app/js/utilities/gameMap.js","app/js/utilities/jsKeyCodes/keyCodes.js","app/js/utilities/jsKeyCodes/keyboard.js","app/js/utilities/referee.js","app/js/utilities/snakeObj.js","app/js/utilities/userHack.js"],"names":["document","addEventListener","console","log","config","require","stage","main","init","cycle","window","_main","width","height","_lineWidth","stroke","widthPadding","heightPadding","scoreX","scoreY","domID","gameWidth","gameHeight","style","lineWidth","strokeStyle","frameCoords","scoreBoard","xPos","yPos","snakeObj","defaultSize","snakeDirections","default","right","left","down","up","renderer","yOffset","xOffset","yBoundry","xBoundry","blockSize","foodColor","snakeColor","gameOverStyle","finalScoreStyle","gameMap","rows","columns","legend","empty","food","snakeHead","snakeBody","states","gamePlay","gameOver","foodPosition","custom","hackable","module","exports","ctx","userHack","gameInput","referee","addParticipant","gameInit","call","randomizePosition","cleanMap","generateFood","processSnake","clean","drawBorders","drawScore","drawMap","gameUpdate","requestAnimationFrame","gameCycle","input","getLastValidInput","setDirection","move","processFood","foodCollision","second","fps","setTimeout","snake","map","render","clearRect","strokeRect","ref","score","level","gCaption","fillText","field","row","y","col","x","coord","block","Math","min","blockGraphic","fillStyle","fillRect","drawGameOver","font","gameOverText","gameWdith","measureText","finalScoreText","div","createElement","canvas","getContext","setAttribute","appendChild","body","upCode","downCode","leftCode","rightCode","upKey","downKey","leftKey","rightKey","gameControls","currentInput","inputs","button","numbercode","assignInputCommands","ins","Object","keys","forEach","press","customKeys","Array","isArray","n","currentState","cols","randomX","round","random","randomY","max","foodY","foodX","printMatrix","trix","length","toString","clear","node","index","isSnakeHead","directionStates","direction","dx","dy","notInBounds","appendNode","refereeExists","setScore","key","codes","Number","keyCode","code","isDown","isUp","undefined","release","downHandler","event","preventDefault","upHandler","bind","rules","participants","value","onGameOver","location","relaod","checkGameOver","callGameOver","member","push","headPosition","size","neutral","part","order","attributes","isHead","head","previousNodePosition","isNotHead","nextNodePosition","netural","query","URLSearchParams","search","get"],"mappings":"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","file":"public/app.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  // do your setup here\n  console.log('Initialized app');\n\n  const config = require(\"./js/config.js\");\n  const stage = require(\"./js/stageUI.js\")(config);\n\n  const main = require(\"./js/mainGame.js\")(config, stage);\n  main.init();\n  main.cycle();\n  console.log(\"Main is:\", main);\n  window._main = main; //TODO: for testing only\n\n\n});\n","const width = 200;\nconst height = 200;\nconst _lineWidth = 2;\nconst stroke = \"black\";\nconst widthPadding = _lineWidth * 2;\nconst heightPadding = 24;\nconst scoreX = width / 4;\nconst scoreY = 12;\n\nconst config = {\n    domID: \"gameContainer\",\n    gameWidth: width + widthPadding,\n    gameHeight: height + heightPadding,\n    style: {\n        lineWidth: _lineWidth,\n        strokeStyle: stroke\n    },\n    frameCoords: [\n        _lineWidth, //x\n        20, //y\n        width - widthPadding, //frame width\n        height - heightPadding //frame height\n    ],\n    scoreBoard:{\n        style : \"14px Arial\",\n        xPos: scoreX,\n        yPos: scoreY\n    },\n    snakeObj:{\n        defaultSize: 3\n    },\n    snakeDirections: {\n        default: 0,\n        right: 0,\n        left: 1,\n        down: 2,\n        up: 3\n    },\n    renderer: {\n        yOffset: 20,\n        xOffset: 3,\n        yBoundry: 185,\n        xBoundry: 187,\n        blockSize: 10,\n        foodColor: \"red\",\n        snakeColor: \"green\",\n        gameOverStyle: '16px Arial',\n        finalScoreStyle: \"20px sans-serif\"\n    }\n};\n\nconfig.gameMap = {\n    rows: height / 10,\n    columns: width / 10,\n    legend: {\n        empty: 0,\n        food:  1,\n        snakeHead: 2,\n        snakeBody: 3\n    },\n    states: {\n        gamePlay: 0,\n        gameOver: 1\n    },\n    foodPosition: - 1\n}\n\nconfig.custom = {\n    hackable: true\n}\n\nmodule.exports = config;\n","\n\nmodule.exports = (config, ctx) => {\n\n    const userHack  = require(\"./utilities/userHack.js\")(config);\n    const snakeObj  = require(\"./utilities/snakeObj.js\")(config);\n    const gameMap   = require(\"./utilities/gameMap.js\")(config);\n    const renderer  = require(\"./render.js\")(ctx, config);\n    const gameInput = require(\"./utilities/gameInput.js\")();\n    const referee   = require(\"./utilities/referee.js\");\n\n\n    referee\n        .init(config)\n        .addParticipant(snakeObj)\n        .addParticipant(gameMap)\n\n\n    //Should always be called first\n    const gameInit = (call) => {\n        snakeObj.randomizePosition();\n        gameMap\n            .cleanMap()\n            .generateFood()\n            .processSnake(snakeObj)\n        //  .printMatrix()\n\n        renderer\n            .clean()\n            .drawBorders()\n            .drawScore(referee)\n            .drawMap(gameMap);\n\n        if (typeof call === \"function\"){\n            call(snakeObj, gameMap);\n        }\n    }\n\n    const gameUpdate = () => {\n        requestAnimationFrame(gameCycle);\n        //console.log(\"Starting Game Cycle!\");\n        let input = gameInput.getLastValidInput();\n        //handle snake player\n        snakeObj\n            .setDirection(input)\n            .move();\n\n        //Process prepare map coordinates for renderer\n        gameMap\n            .cleanMap()\n            .processFood()\n            .processSnake(snakeObj)\n            .foodCollision(snakeObj, referee);\n\n        //render game\n        renderer\n            .clean()\n            .drawBorders()\n            .drawScore(referee)\n            .drawMap(gameMap);\n\n        if (typeof call === \"function\"){\n            call(snakeObj, gameMap);\n        };\n\n    }\n    const gameCycle = () => {\n        let second = 1000;\n        let fps    = 5;\n        return setTimeout(gameUpdate, second/fps);\n    };\n\n    return {\n        snake: snakeObj,\n        map: gameMap,\n        renderer: renderer,\n        init: gameInit,\n        cycle: gameUpdate\n    };\n};\n","const render = {};\nrender.init = (ctx, config) => {\n    render.ctx = ctx;\n    render.config = config;\n    return render;\n};\nrender.clean = () => {\n     render.ctx.clearRect(0, 0, render.config.gameWidth, render.config.gameHeight);\n     return render;\n}\nrender.drawBorders = () => {\n    //Draw the game border\n    render.ctx.strokeRect(...render.config.frameCoords);\n    return render;\n};\nrender.drawScore = (ref) => {\n    const score = ref.score;\n    const level = ref.level;\n    const gCaption = `Score: ${score} ~ Level: ${level}`;\n    render.ctx.fillText(gCaption, render.config.scoreBoard.xPos, render.config.scoreBoard.yPos);\n    return render;\n}\nrender.drawMap = (field) => {\n    //Render the game object\n    field.map.map( (row, y) => {\n        row.map( (col, x) => {\n            let coord = field.map[y][x];\n            if (coord === 0) return;\n\n            let block = render.config.renderer.blockSize;\n            let yBoundry = Math.min(y * block + render.config.renderer.yOffset, render.config.renderer.yBoundry);\n            let xBoundry = Math.min(x * block + render.config.renderer.xOffset, render.config.renderer.xBoundry);\n            let blockGraphic = [xBoundry, yBoundry, block, block];\n            let style = render.config.renderer.snakeColor;\n            if (coord === field.legend.food){\n                style = render.config.renderer.foodColor\n            }\n            render.ctx.fillStyle = style;\n            render.ctx.fillRect(...blockGraphic);\n        });\n    });\n\n    return render;\n};\nrender.drawGameOver = (score) => {\n\n    // Clear the canvas\n    render.ctx.fillStyle = 'black';\n    render.ctx.font = render.config.renderer.gameOverStyle;\n    const gameOverText = [\n        \"Game Over!\",\n        ((render.config.gameWdith /2) - (render.ctx.measureText(\"Game Over!\").width/2)),\n        50\n    ];\n    render.ctx.fillText(...gameOverText);\n\n    render.ctx.font = render.config.renderer.finalScoreStyle;\n    const finalScoreText = [\n        \"Your Score Was \" + score,\n        ((render.config.gameWidth /2) - (render.ctx.measureText(\"Your Score Was\").width/2)),\n        70\n    ];\n    render.ctx.fillText(...finalScoreText);\n    console.log(\"Score has been drawn!!\");\n\n    return render;\n};\nmodule.exports = (config, ctx) => {\n    return render.init(config, ctx);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n","module.exports = (config) => {\n    //Construct the UI\n    const div = document.createElement(\"div\");\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n\n\n    canvas.setAttribute(\"width\", config.gameWidth);\n    canvas.setAttribute(\"height\", config.gameHeight);\n    canvas.setAttribute(\"id\", config.domID);\n\n    div.appendChild(canvas);\n    document.body.appendChild(div);\n\n    return ctx;\n}\n","let upCode = require(\"./jsKeyCodes/keyCodes.js\")(\"up arrow\");\nlet downCode = require(\"./jsKeyCodes/keyCodes.js\")(\"down arrow\");\nlet leftCode = require(\"./jsKeyCodes/keyCodes.js\")(\"left arrow\");\nlet rightCode = require(\"./jsKeyCodes/keyCodes.js\")(\"right arrow\");\n\nlet upKey  = require(\"./jsKeyCodes/keyboard.js\")(upCode);\nlet downKey = require(\"./jsKeyCodes/keyboard.js\")(downCode);\nlet leftKey = require(\"./jsKeyCodes/keyboard.js\")(leftCode);\nlet rightKey = require(\"./jsKeyCodes/keyboard.js\")(rightCode);\n\n//\nlet gameControls = {};\ngameControls.currentInput = -1;\ngameControls.inputs = {\n    up: {\n        button: upKey,\n        numbercode: 8\n    },\n    down: {\n        button: downKey,\n        numbercode: 2\n    },\n    left: {\n        button: leftKey,\n        numbercode: 4\n    },\n    right: {\n        button: rightKey,\n        numbercode: 6\n    }\n};\ngameControls.assignInputCommands = (call) => {\n    let ins = Object.keys(gameControls.inputs);\n    ins.forEach((input) => {\n        gameControls.inputs[input].button.press = () => {\n            gameControls.currentInput = gameControls.inputs[input].numbercode;\n        }\n    });\n}\ngameControls.getLastValidInput = () => {\n    return gameControls.currentInput;\n}\ngameControls.init = (customKeys) => {\n    if (Array.isArray(customKeys)){\n        //assign custom keys here\n    };\n    gameControls.assignInputCommands();\n\n    return gameControls;\n};\n\nmodule.exports = gameControls.init;\n","const gameMap = {};\ngameMap.init = (config) => {\n    gameMap.map = [...Array(config.gameMap.columns).keys()];\n    gameMap.map = gameMap.map.map((n) => {\n        return [...Array(config.gameMap.rows).keys()];\n    });\n    gameMap.legend = config.gameMap.legend;\n    gameMap.foodPosition = config.gameMap.foodPosition;\n    gameMap.states = config.gameMap.states;\n    gameMap.currentState = gameMap.states.gamePlay;\n\n    gameMap.config = config;\n\n    return gameMap;\n}\n\ngameMap.generateFood = () => {\n    const cols = gameMap.config.gameMap.columns;\n    const rows = gameMap.config.gameMap.rows;\n    let randomX = Math.round(Math.random() * cols - 1);\n    let randomY = Math.round(Math.random() * rows - 1);\n    //Make sure random coordinates are withing range of the array\n    randomX = Math.max(0, randomX);\n    randomY = Math.max(0, randomY);\n    //randomX = randomX < 0 ? 0 : randomX;\n    //randomY = randomY < 0 ? 0 : randomY;\n\n    //TODO find out what the fuck constant \"2\" is!!!???\n    while (gameMap.map[randomY][randomX] !== gameMap.legend.empty){\n        randomX = Math.round(Math.random() * cols - 1);\n        randomY = Math.round(Math.random() * rows - 1);\n        randomX = randomX < 0 ? 0 : randomX;\n        randomY = randomY < 0 ? 0 : randomY;\n        console.log(\"Food search on coord:\", randomX, randomY);\n    }\n\n    //TODO also find out what the fuck constant \"1\" is!!!???\n    gameMap.map[randomY][randomX] = gameMap.legend.food;\n\n    //const foodPosition = `Food Position X: ${randomX} Y: ${randomY}`;\n    //console.log(foodPosition);\n    gameMap.foodPosition = [randomX, randomY];\n\n    return gameMap; //setup method chaining\n};\ngameMap.processFood = () => {\n    let foodY = gameMap.foodPosition[1];\n    let foodX = gameMap.foodPosition[0];\n    gameMap.map[foodY][foodX] = gameMap.legend.food;\n    return gameMap;\n}\ngameMap.printMatrix = () => {\n    let y = 0;\n    let trix = '';\n    while (y < gameMap.config.gameMap.rows){\n        for (let x = 0; x < gameMap.map.length; x++){\n            trix = trix + gameMap.map[x][y].toString();\n        }\n        trix = trix + \"\\n\";\n        y++;\n    }\n    console.clear();\n    console.log(\"~~~~~printing matrix~~~~~\");\n    console.log(trix);\n\n    return gameMap;\n};\n\ngameMap.processSnake = (snake) => {\n    snake.body.forEach( (node, index) => {\n\n        let isSnakeHead = index === 0;\n        if (isSnakeHead) {\n            let states = snake.directionStates;\n            switch(node.direction) {\n                case states.right:\n                    node.dx = 1;\n                    node.dy = 0;\n                break;\n\n                case states.left:\n                    node.dx = -1;\n                    node.dy = 0;\n                break;\n\n                case states.up:\n                    node.dx = 0;\n                    node.dy = -1;\n                break;\n\n                case states.down:\n                    node.dx = 0;\n                    node.dy = 1;\n                break;\n\n\n            }\n            //console.log(\"head is:\", node);\n            let yOffset = node.y + node.dy;\n            let xOffset = node.x + node.dx;\n            const notInBounds = (node.x < 0 || xOffset > 20 || node.y < 0 || yOffset > 18); //TODO: set explicit stage coordinates in config\n            if (notInBounds){\n                console.log(\"Game over!\");\n                gameMap.currentState = gameMap.states.gameOver;\n            }\n        }\n\n        if (gameMap.currentState === gameMap.states.gamePlay) {\n            gameMap.map[node.y][node.x] = gameMap.legend.snakeHead;\n        }\n    });\n    //console.log(\"Snake has been processed!!\", snake.body[0].x, snake.body[0].y);\n    return gameMap; //check gameOver state afterwards\n}\ngameMap.foodCollision = (snakeObj, ref) => {\n    if (gameMap.currentState === gameMap.states.gamePlay) {\n        let snake = snakeObj.body[0];\n        let foodY = gameMap.foodPosition[1];\n        let foodX = gameMap.foodPosition[0];\n\n        if (gameMap.map[snake.y][snake.x] === gameMap.map[foodY][foodX]){\n            gameMap.map[foodY][foodX] = gameMap.legend.empty;\n            gameMap.generateFood();\n            snakeObj.appendNode();\n            let refereeExists = typeof ref !== \"undefined\" && ref !== null && typeof ref === \"object\";\n            if (refereeExists){\n                ref.setScore(1);\n            }\n        }\n    }\n\n    return gameMap;\n};\ngameMap.cleanMap = () => {\n    gameMap.map = gameMap.map.map(x => {\n        return x.map( y => {\n            return gameMap.legend.empty;\n        });\n    });\n\n    return gameMap;\n}\n\nmodule.exports = (config) => {\n    return gameMap.init(config);\n}\n","module.exports = (key) => {\n    let codes = {\n        \"0\": \"48\",\n        \"1\": \"49\",\n        \"2\": \"50\",\n        \"3\": \"51\",\n        \"4\": \"52\",\n        \"5\": \"53\",\n        \"6\": \"54\",\n        \"7\": \"55\",\n        \"8\": \"56\",\n        \"9\": \"57\",\n        \"That key has no keycode\": \"0\",\n        \"break\": \"3\",\n        \"backspace / delete\": \"8\",\n        \"tab\": \"9\",\n        \"clear\": \"12\",\n        \"enter\": \"13\",\n        \"shift\": \"16\",\n        \"ctrl\": \"17\",\n        \"alt\": \"18\",\n        \"pause/break\": \"19\",\n        \"caps lock\": \"20\",\n        \"hangul\": \"21\",\n        \"hanja\": \"25\",\n        \"escape\": \"27\",\n        \"conversion\": \"28\",\n        \"non-conversion\": \"235\",\n        \"spacebar\": \"32\",\n        \"page up\": \"33\",\n        \"page down\": \"34\",\n        \"end\": \"35\",\n        \"home\": \"36\",\n        \"left arrow\": \"37\",\n        \"up arrow\": \"38\",\n        \"right arrow\": \"39\",\n        \"down arrow\": \"40\",\n        \"select\": \"41\",\n        \"print\": \"42\",\n        \"execute\": \"43\",\n        \"Print Screen\": \"44\",\n        \"insert\": \"45\",\n        \"delete\": \"46\",\n        \"help\": \"47\",\n        \":\": \"58\",\n        \"semicolon (firefox), equals\": \"59\",\n        \"<\": \"60\",\n        \"equals (firefox)\": \"61\",\n        \"ß\": \"63\",\n        \"@ (firefox)\": \"64\",\n        \"a\": \"65\",\n        \"b\": \"66\",\n        \"c\": \"67\",\n        \"d\": \"68\",\n        \"e\": \"69\",\n        \"f\": \"70\",\n        \"g\": \"71\",\n        \"h\": \"72\",\n        \"i\": \"73\",\n        \"j\": \"74\",\n        \"k\": \"75\",\n        \"l\": \"76\",\n        \"m\": \"77\",\n        \"n\": \"78\",\n        \"o\": \"79\",\n        \"p\": \"80\",\n        \"q\": \"81\",\n        \"r\": \"82\",\n        \"s\": \"83\",\n        \"t\": \"84\",\n        \"u\": \"85\",\n        \"v\": \"86\",\n        \"w\": \"87\",\n        \"x\": \"88\",\n        \"y\": \"89\",\n        \"z\": \"90\",\n        \"Windows Key / Left ⌘ / Chromebook Search key\": \"91\",\n        \"right window key\": \"92\",\n        \"Windows Menu / Right ⌘\": \"93\",\n        \"sleep\": \"95\",\n        \"numpad 0\": \"96\",\n        \"numpad 1\": \"97\",\n        \"numpad 2\": \"98\",\n        \"numpad 3\": \"99\",\n        \"numpad 4\": \"100\",\n        \"numpad 5\": \"101\",\n        \"numpad 6\": \"102\",\n        \"numpad 7\": \"103\",\n        \"numpad 8\": \"104\",\n        \"numpad 9\": \"105\",\n        \"multiply\": \"106\",\n        \"add\": \"107\",\n        \"numpad period (firefox)\": \"108\",\n        \"subtract\": \"109\",\n        \"decimal point\": \"110\",\n        \"divide\": \"111\",\n        \"f1\": \"112\",\n        \"f2\": \"113\",\n        \"f3\": \"114\",\n        \"f4\": \"115\",\n        \"f5\": \"116\",\n        \"f6\": \"117\",\n        \"f7\": \"118\",\n        \"f8\": \"119\",\n        \"f9\": \"120\",\n        \"f10\": \"121\",\n        \"f11\": \"122\",\n        \"f12\": \"123\",\n        \"f13\": \"124\",\n        \"f14\": \"125\",\n        \"f15\": \"126\",\n        \"f16\": \"127\",\n        \"f17\": \"128\",\n        \"f18\": \"129\",\n        \"f19\": \"130\",\n        \"f20\": \"131\",\n        \"f21\": \"132\",\n        \"f22\": \"133\",\n        \"f23\": \"134\",\n        \"f24\": \"135\",\n        \"num lock\": \"144\",\n        \"scroll lock\": \"145\",\n        \"^\": \"160\",\n        \"!\": \"161\",\n        \"؛ (arabic semicolon)\": \"162\",\n        \"#\": \"163\",\n        \"$\": \"164\",\n        \"ù\": \"165\",\n        \"page backward\": \"166\",\n        \"page forward\": \"167\",\n        \"refresh\": \"168\",\n        \"closing paren (AZERTY)\": \"169\",\n        \"*\": \"170\",\n        \"~ + * key\": \"171\",\n        \"home key\": \"172\",\n        \"minus (firefox), mute/unmute\": \"173\",\n        \"decrease volume level\": \"174\",\n        \"increase volume level\": \"175\",\n        \"next\": \"176\",\n        \"previous\": \"177\",\n        \"stop\": \"178\",\n        \"play/pause\": \"179\",\n        \"e-mail\": \"180\",\n        \"mute/unmute (firefox)\": \"181\",\n        \"decrease volume level (firefox)\": \"182\",\n        \"increase volume level (firefox)\": \"183\",\n        \"semi-colon / ñ\": \"186\",\n        \"equal sign\": \"187\",\n        \"comma\": \"188\",\n        \"dash\": \"189\",\n        \"period\": \"190\",\n        \"forward slash / ç\": \"191\",\n        \"grave accent / ñ / æ / ö\": \"192\",\n        \"?, / or °\": \"193\",\n        \"numpad period (chrome)\": \"194\",\n        \"open bracket\": \"219\",\n        \"back slash\": \"220\",\n        \"close bracket / å\": \"221\",\n        \"single quote / ø / ä\": \"222\",\n        \"`\": \"223\",\n        \"left or right ⌘ key (firefox)\": \"224\",\n        \"altgr\": \"225\",\n        \"< /git >, left back slash\": \"226\",\n        \"GNOME Compose Key\": \"230\",\n        \"ç\": \"231\",\n        \"XF86Forward\": \"233\",\n        \"XF86Back\": \"234\",\n        \"alphanumeric\": \"240\",\n        \"hiragana/katakana\": \"242\",\n        \"half-width/full-width\": \"243\",\n        \"kanji\": \"244\",\n        \"unlock trackpad (Chrome/Edge)\": \"251\",\n        \"toggle touchpad\": \"255\"\n    };\n\n    return Number(codes[key]);\n}\n","/**\n    Example usage:\n    let keyCode require(\"./keycodes\")(\"up arrow\");\n    let upKey = require(\"./keyboard.js\")(keyCode) //38 is keycode number for up!\n    if (upKey.isDown){\n        doSomething();\n    }\n*/\n\n/**\n*    A utility function for constructoring keyboard pressing events\n*    @param {number} keycode - ASCII number value that represents a keyboard key\n*    @returns {object} - An object with relative keyboard input events methods\n*/\nmodule.exports = (keyCode) => {\n    var key = {};\n    key.code = keyCode;\n    key.isDown = false;\n    key.isUp = true;\n    key.press = undefined;\n    key.release = undefined;\n    //The `downHandler`\n    key.downHandler = function(event) {\n        if (event.keyCode === key.code) {\n          if (key.isUp && key.press) key.press();\n          key.isDown = true;\n          key.isUp = false;\n        }\n        event.preventDefault();\n    };\n\n    //The `upHandler`\n    key.upHandler = function(event) {\n        if (event.keyCode === key.code) {\n          if (key.isDown && key.release) key.release();\n          key.isDown = false;\n          key.isUp = true;\n        }\n        event.preventDefault();\n    };\n\n    //Attach event listeners\n    window.addEventListener(\n        \"keydown\", key.downHandler.bind(key), false\n    );\n    window.addEventListener(\n        \"keyup\", key.upHandler.bind(key), false\n    );\n    return key;\n};\n","const referee = {};\nreferee.rules = {\n    gamePlay: 0,\n    gameOver: 1\n}\nreferee.participants = [];\nreferee.init = (config) => {\n    referee.score = 0;\n    referee.level = 1;\n    if (config.custom.hackable === true){\n        referee.level = config.custom.level || 1;\n    };\n\n    return referee;\n}\nreferee.setScore = (value) => {\n    referee.score += value * referee.level;\n\n    if (referee.score < 0){\n        referee.score = 0;\n    };\n\n    return referee;\n}\nreferee.onGameOver = (call) => {\n    call();\n    window.location.relaod();\n}\nreferee.checkGameOver = (call) => {\n    let callGameOver = false;\n    participants.forEach((member) => {\n        if (member.currentState === referee.rules.gameOver){\n            callGameOver = true;\n        }\n    });\n\n    if (callGameOver){\n        console.log(\"Game is over!\");\n        referee.onGameOver(call);\n    }\n\n    return callGameOver;\n}\nreferee.addParticipant = (member) => {\n    referee.participants.push(member);\n\n    return referee\n}\nmodule.exports = referee;\n","const snakeObj = {};\n\nsnakeObj.init = (config) => {\n    snakeObj.headPosition = [0,0]; // x,y\n    snakeObj.size = config.snakeObj.defaultSize;\n    snakeObj.body = [...Array(snakeObj.size).keys()]; //parts that follow snake head\n    snakeObj.config = config;\n    snakeObj.dx = 0;\n    snakeObj.dy = 0;\n    snakeObj.direction = 5;\n    snakeObj.directionStates = {\n        up: 8,\n        down: 2,\n        left: 4,\n        right: 6,\n        neutral: 5\n    };\n    snakeObj.body = snakeObj.body.map( (part, order) => {\n        let x = typeof part.x === \"undefined\" ? 0 : part.x;\n        let y = typeof part.y === \"undefined\" ? 0 : part.y;\n        let attributes = {\n            x:x,\n            y:y\n       };\n       let isHead = order === 0;\n       if (isHead){\n            //Add special property for head node\n           attributes.direction = 0;\n           attributes.dx = 0;\n           attributes.dy = 0;\n       }\n\n        return attributes;\n    });\n\n    return snakeObj;\n}\nsnakeObj.randomizePosition = () => {\n    const cols = snakeObj.config.gameMap.columns;\n    const rows = snakeObj.config.gameMap.rows;\n    let randomX = Math.round(Math.random() * cols - 1);\n    let randomY = Math.round(Math.random() * rows - 1);\n    //Make sure random coordinates are withing range of the array\n    randomX = randomX < 0 ? 0 : randomX;\n    randomY = randomY < 0 ? 0 : randomY;\n\n    while (randomX - snakeObj.size < 0) {\n        randomX = Math.round(Math.random() * cols - 1);\n        randomX = randomX < 0 ? 0 : randomX;\n    };\n\n    //TODO mark the map with body parts that aren't the head\n    snakeObj.body = snakeObj.body.map( (part, order) => {\n        part.x = randomX - order;\n        part.y = randomY\n        console.log(part);\n        return part;\n    })\n\n    snakeObj.headPosition = [randomX, randomY];\n    return [randomX, randomY];\n};\nsnakeObj.move = (call) => {\n\n    let head = snakeObj.body[0];\n\n    //store current head position\n    let previousNodePosition = {\n        x: head.x,\n        y: head.y\n    };\n\n    //Move initial head direction\n    head.x += head.dx;\n    head.y += head.dy;\n\n    //every subsequent body part should inherit direciton of previous body part\n    snakeObj.body = snakeObj.body.map( (node, order) => {\n        let isNotHead = order !== 0;\n        if (isNotHead){\n            let nextNodePosition = {\n                x: node.x,\n                y: node.y\n            };\n\n            node.x = previousNodePosition.x;\n            node.y = previousNodePosition.y;\n            previousNodePosition = nextNodePosition;\n        };\n\n        return node;\n    });\n\n    return snakeObj;\n};\nsnakeObj.setDirection = (direction, call) => {\n    let states = snakeObj.directionStates;\n    switch(direction){\n        case states.up:\n                if (snakeObj.direction !== states.down){\n                    snakeObj.body[0].dx = 0;\n                    snakeObj.body[0].dy = -1;\n                    snakeObj.direction = direction;\n                }\n        break;\n\n        case states.down:\n                if (snakeObj.direction !== states.up){\n                    snakeObj.body[0].dx = 0;\n                    snakeObj.body[0].dy = 1;\n                    snakeObj.direction = direction;\n                }\n        break;\n\n        case states.left:\n                if (snakeObj.direction !== states.right){\n                    snakeObj.body[0].dx = -1;\n                    snakeObj.body[0].dy = 0;\n                    snakeObj.direction = direction;\n                }\n        break;\n\n        case states.right:\n                if (snakeObj.direction !== states.left) {\n                    snakeObj.body[0].dx = 1;\n                    snakeObj.body[0].dy = 0;\n                    snakeObj.direction = direction;\n                }\n        break;\n\n        case -1:\n        case states.netural:\n            snakeObj.setDirection(snakeObj.direction);\n        break;\n    }\n\n\n    return snakeObj;\n};\nsnakeObj.appendNode = () => {\n    const size = snakeObj.body.length;\n    snakeObj.body.push({\n        x: snakeObj.body[size - 1].x,\n        y: snakeObj.body[size - 1].y\n    });\n\n    console.log(\"body exteneded!!\");\n    return snakeObj;\n}\n\nmodule.exports = (config) => {\n    return snakeObj.init(config);\n}\n","module.exports = (config) => {\n    let query  = new URLSearchParams(window.location.search);\n    let level      = Number(query.get(\"level\"))      || null;\n    let snakeColor = query.get(\"snakeColor\") || null;\n    let foodColor  = query.get(\"foodColor\")  //|| null;\n\n    if (config.custom.hackable === true){\n        config.custom.level = level;\n        config.custom.snakeColor = snakeColor;\n        config.custom.foodColor  = foodColor;\n\n        if (snakeColor !== null) {\n            config.renderer.snakeColor = snakeColor;\n        }\n        if (foodColor !== null){\n            config.renderer.foodColor  = foodColor;\n        }\n    }\n}\n"]}